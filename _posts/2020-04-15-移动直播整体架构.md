---
layout: mypost
title: 移动直播整体架构
categories: [直播, 架构]
---

移动直播的基本架构图如下所示：

![livevideo-arch](livevideo-arch.png)

移动直播整体架构大致可分为五个部分：

1.主播端。主要负责音视频数据的采集、预览、处理(美声、美颜、滤镜等)、编码及将编码后的数据推送至源站（可能经过上行加速节点）。

2.源站。该部分属于云服务的一项功能，接收来自主播端的音视频数据，当来自CDN网络（下行节点）的数据拉取请求时，按照对应的格式返回给CDN。同时也担负将直播音视频数据落盘，生成点播回看视频。

3.转码。可以从源站拉取一路流，转码成多种分辨率、码率，再回推给源站。这样实现了一路主播视频流的推送，制造出码率不同的多路流。拉取器是转码的一种变种，它从其他源处拉取数据流（使用某种约定好的拉流协议），并remux成rtmp推送给源站。

4.CDN。上下行节点都归为数据分发网络。该部分属于云服务的一项功能，多层下行节点从源站获取直播音视频数据，然后将数据分发给各地观众。

5.观众端。从下行节点获取直播数据，解析、解码并渲染音视频，以供观众观看。


